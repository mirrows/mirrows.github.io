(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[166],{7908:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSG:function(){return b},default:function(){return q}});var a=r(6835),t=r(29),s=r(9499),c=r(7812),i=r(7794),o=r.n(i),u=r(1575),l=r(5658),d=r.n(l),p=r(3806),m=r(7294),g=r(842),_=function(e){return"".concat(Math.ceil(e/60),":").concat(String(e%60).padStart(2,"0"))},f=r(8984),v=r(5893);function h(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function y(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?h(Object(r),!0).forEach(function(n){(0,s.Z)(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var x=function(){var e=(0,m.useState)(),n=e[0],r=e[1],a=(0,m.useState)([]),t=a[0],s=a[1],i=(0,m.useRef)(null),o=function(e){s(function(n){return[].concat((0,c.Z)(n),[e])})},u=function(e){s(function(n){return[].concat((0,c.Z)(n),[e])}),r(y(y({},e),{},{ind:t.length+1})),setTimeout(function(){var e;null===(e=i.current)||void 0===e||e.play()},500)};return(0,m.useEffect)(function(){return f.SR.on("addSong",o),f.SR.on("playSong",u),function(){f.SR.clearEmit("addSong"),f.SR.clearEmit("playSong")}},[]),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:d().player_warp,children:(0,v.jsx)("audio",{ref:i,src:(null==n?void 0:n.src)||"",controls:!0})})})},j=function(e){var n,r,a=e.source,s=(n=(0,t.Z)(o().mark(function e(n){var r;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:var a;return e.next=2,a={id:n.songmid,mediaId:n.media_mid},(0,g.IO)({path:"/qq/song",query:a});case 2:return r=e.sent,e.abrupt("return",(null==r?void 0:r.code)===0?r.data:"");case 4:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),c=(r=(0,t.Z)(o().mark(function e(n,r){var a;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(r);case 2:a=e.sent,f.SR.emit(n,{id:"qqmusic_".concat(r.songmid),from:"qqmusic",name:r.songname,avatar:"",singers:r.singer.map(function(e){return e.name}).join("、"),src:a,duration:r.interval,time:0});case 4:case"end":return e.stop()}},e)})),function(e,n){return r.apply(this,arguments)});return(0,v.jsx)("div",{className:d().card_wrap,style:{backgroundImage:"radial-gradient(circle at 107% 7%, #d97220 0, #d97220 10%, #efe888 20%, transparent 30%, transparent 100%),radial-gradient(circle at 7% 107% , #d97220 0, #d97220 10%, #efe888 20%, transparent 30%, transparent 100%)"},children:(void 0===a?[]:a).map(function(e,n){return(0,v.jsxs)("div",{className:d().song_wrap,children:[(0,v.jsxs)("div",{className:d().song_msg,children:[(0,v.jsxs)("div",{children:["[",_(e.interval),"] ",e.songname]}),(0,v.jsx)("div",{className:d().singer,children:e.singer.map(function(e){return e.name}).join("、")})]}),(0,v.jsxs)("div",{className:d().song_operate,children:[(0,v.jsx)(p.Z,{className:d().operate_icon,type:"plus",onClick:function(){return c("addSong",e)}}),(0,v.jsx)(p.Z,{className:d().operate_icon,type:"play",onClick:function(){return c("playSong",e)}})]})]},n)})})},w=function(e){var n,r=e.source,a=(n=(0,t.Z)(o().mark(function e(n,r){var a;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.url;case 2:a=e.sent,f.SR.emit(n,{id:"netease_".concat(r.id),from:"netease",name:r.name,avatar:r.artists[0].img1v1Url,singers:r.artists.map(function(e){return e.name}).join("、"),src:a,duration:Math.ceil(r.duration/1e3),time:0});case 4:case"end":return e.stop()}},e)})),function(e,r){return n.apply(this,arguments)});return(0,v.jsx)("div",{className:d().card_wrap,style:{backgroundImage:"radial-gradient(circle at 107% 7%, #a12226 0, #a12226 10%, #f05d6a 20%, transparent 30%, transparent 100%),radial-gradient(circle at 7% 107% , #a12226 0, #a12226 10%, #f05d6a 20%, transparent 30%, transparent 100%)"},children:(void 0===r?[]:r).map(function(e,n){return(0,v.jsxs)("div",{className:d().song_wrap,children:[(0,v.jsxs)("div",{className:d().song_msg,children:[(0,v.jsxs)("div",{children:["[",_(Math.ceil(e.duration/1e3)),"] ",e.name,e.alias[0]||""]}),(0,v.jsx)("div",{className:d().singer,children:e.artists.map(function(e){return e.name}).join("、")})]}),(0,v.jsxs)("div",{className:d().song_operate,children:[(0,v.jsx)(p.Z,{className:d().operate_icon,type:"plus",onClick:function(){return a("addSong",e)}}),(0,v.jsx)(p.Z,{className:d().operate_icon,type:"play",onClick:function(){return a("playSong",e)}})]})]},n)})})},N=function(e){var n,r=e.source,a=(n=(0,t.Z)(o().mark(function e(n,r){var a;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.mp3;case 2:a=e.sent,f.SR.emit(n,{id:"migu_".concat(r.copyrightId),from:"migu",name:r.songName,avatar:"",singers:r.singerName,src:a,duration:0,time:0});case 4:case"end":return e.stop()}},e)})),function(e,r){return n.apply(this,arguments)});return(0,v.jsx)("div",{className:d().card_wrap,style:{backgroundImage:"radial-gradient(circle at 107% 7%, #bd1978 0, #bd1978 10%, #e6629a 20%, transparent 30%, transparent 100%),radial-gradient(circle at 7% 107% , #bd1978 0, #bd1978 10%, #e6629a 20%, transparent 30%, transparent 100%)"},children:(void 0===r?[]:r).map(function(e,n){return(0,v.jsxs)("div",{className:d().song_wrap,children:[(0,v.jsxs)("div",{className:d().song_msg,children:[(0,v.jsx)("div",{children:e.songName}),(0,v.jsx)("div",{className:d().singer,children:e.singerName})]}),(0,v.jsxs)("div",{className:d().song_operate,children:[(0,v.jsx)(p.Z,{className:d().operate_icon,type:"plus",onClick:function(){return a("addSong",e)}}),(0,v.jsx)(p.Z,{className:d().operate_icon,type:"play",onClick:function(){return a("playSong",e)}})]})]},n)})})},k=function(e){var n,r,a=e.source,s=(n=(0,t.Z)(o().mark(function e(n){var r,a,t;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:var s;return e.next=2,s=n.hash,(0,g.IO)({path:"/kugou/song",query:{id:s}});case 2:return t=e.sent,e.abrupt("return",(null==t?void 0:t.code)===0?{src:(null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.url)||"",avatar:(null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.imgUrl)||""}:{src:"",avatar:""});case 4:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),c=(r=(0,t.Z)(o().mark(function e(n,r){var a,t,c;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(r);case 2:t=(a=e.sent).src,c=a.avatar,f.SR.emit(n,{id:"kugou_".concat(r.hash),from:"kugou",name:r.songname,avatar:c,singers:r.singername,src:t,duration:r.duration,time:0});case 6:case"end":return e.stop()}},e)})),function(e,n){return r.apply(this,arguments)});return(0,v.jsx)("div",{className:d().card_wrap,style:{backgroundImage:"radial-gradient(circle at 107% 7%, #1e82ff 0, #1e82ff 10%, #b0ebfb 20%, transparent 30%, transparent 100%),radial-gradient(circle at 7% 107% , #1e82ff 0, #1e82ff 10%, #b0ebfb 20%, transparent 30%, transparent 100%)"},children:(void 0===a?[]:a).map(function(e,n){return(0,v.jsxs)("div",{className:d().song_wrap,children:[(0,v.jsxs)("div",{className:d().song_msg,children:[(0,v.jsxs)("div",{children:["[",_(e.duration),"] ",e.songname]}),(0,v.jsx)("div",{className:d().singer,children:e.singername})]}),(0,v.jsxs)("div",{className:d().song_operate,children:[(0,v.jsx)(p.Z,{className:d().operate_icon,type:"plus",onClick:function(){return c("addSong",e)}}),(0,v.jsx)(p.Z,{className:d().operate_icon,type:"play",onClick:function(){return c("playSong",e)}})]})]},n)})})},S=function(e){var n=e.type,r=e.source;return({qqmusic:(0,v.jsx)(j,{source:r}),netease:(0,v.jsx)(w,{source:r}),migu:(0,v.jsx)(N,{source:r}),kugou:(0,v.jsx)(k,{source:r})})[n]},b=!0,q=function(){var e=(0,m.useState)(""),n=e[0],r=e[1],t=(0,m.useState)(""),s=t[0],c=t[1],i=(0,m.useState)({kugou:[],migu:[],netease:[],qqmusic:[]}),o=i[0],l=i[1];return(0,m.useEffect)(function(){r((0,u.p)())},[]),(0,v.jsxs)("div",{className:d().wrap,children:[(0,v.jsxs)("div",{className:d().content,children:[(0,v.jsxs)("div",{className:d().input_wrap,children:[(0,v.jsx)("input",{type:"text",className:d().search_input,style:{boxShadow:"0 0 1px 1px ".concat(n)},value:s,onInput:function(e){return c(e.target.value)}}),(0,v.jsx)(p.Z,{className:d().search_icon,width:"25",type:"search",onClick:function(){s&&Promise.allSettled([(0,g.IO)({path:"/qq/search",query:{keyword:s}}),(0,g.IO)({path:"/kugou/search",query:{keyword:s}}),(0,g.IO)({path:"/netease/search",query:{keyword:s}}),(0,g.IO)({path:"/migu/search",query:{keyword:s}})]).then(function(e){var n={kugou:[],migu:[],netease:[],qqmusic:[]},r=e.map(function(e){var n;return"fulfilled"===e.status&&(null===(n=e.value)||void 0===n?void 0:n.code)===0?e.value.data:[]}),t=(0,a.Z)(r,4);n.qqmusic=t[0],n.kugou=t[1],n.netease=t[2],n.migu=t[3],console.log(n),l(n)})}})]}),(0,v.jsxs)("div",{className:d().card_lines,children:[(0,v.jsxs)("div",{className:d().card_line,children:[(0,v.jsx)(S,{type:"kugou",source:o.kugou}),(0,v.jsx)(S,{type:"migu",source:o.migu})]}),(0,v.jsxs)("div",{className:d().card_line,children:[(0,v.jsx)(S,{type:"netease",source:o.netease}),(0,v.jsx)(S,{type:"qqmusic",source:o.qqmusic})]})]})]}),(0,v.jsx)(x,{})]})}},2013:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/demos/musicPlayer",function(){return r(7908)}])},5658:function(e){e.exports={wrap:"musicPlayer_wrap__vEMaR",content:"musicPlayer_content__dXInQ",input_wrap:"musicPlayer_input_wrap__sIRHY",search_input:"musicPlayer_search_input___oHca",search_icon:"musicPlayer_search_icon__aMgeO",card_lines:"musicPlayer_card_lines__zRStG",card_line:"musicPlayer_card_line__YVjJU",card_wrap:"musicPlayer_card_wrap__z6WWr",song_wrap:"musicPlayer_song_wrap__QeJqT",singer:"musicPlayer_singer__g3Gan",song_operate:"musicPlayer_song_operate__UtDvr",operate_icon:"musicPlayer_operate_icon__oNg1V",player_warp:"musicPlayer_player_warp__9pfvG"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=2013)}),_N_E=e.O()}]);