(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[321],{7153:function(e,t,n){"use strict";var r=n(7294);t.Z=function(e){var t=e.value,n=e.render,a=(0,r.useState)(t),c=a[0],o=a[1];return(0,r.useEffect)(function(){o((t?new Date(t):new Date).toLocaleString())},[t]),n(c||"")}},989:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(9499),a=n(9922),c=n(2999),o=n(7153),l=n(277),i=n(9980),s=n.n(i),u=n(1163),_=n(7294),f=n(8924),p=n.n(f),b=n(684),d=n.n(b),m=n(5893);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e){var t=e.artical,n=e.onSubmit,r=new(s()),i=(0,_.useState)((null==t?void 0:t.title)||""),f=i[0],b=i[1],g=(0,_.useState)((null==t?void 0:t.body)||""),v=g[0],j=g[1],w=(0,_.useState)((null==t?void 0:t.img)||""),x=w[0],y=w[1],O=(0,_.useRef)(null),N=(0,u.useRouter)();return(0,_.useEffect)(function(){y((null==t?void 0:t.img)||"")},[t]),(0,m.jsxs)("div",{className:d().creator_wrap,children:[(0,m.jsx)("div",{className:d().mobile_top_mask}),(0,m.jsxs)("div",{className:d().wrap,children:[(0,m.jsxs)("div",{className:d().real_content_area,children:[(0,m.jsx)("h1",{children:f}),(0,m.jsx)("div",{className:d().text_small,children:(0,m.jsx)(o.Z,{render:function(e){return(0,m.jsxs)("span",{className:d().atl_base_msg,children:["创建时间：",e]})},value:null==t?void 0:t.created_at})}),(0,m.jsx)(c.Z,{className:d().atl_bg,width:"700",height:"200",src:x,alt:f}),(0,m.jsx)("div",{className:d().blog_content,dangerouslySetInnerHTML:{__html:(0,l.K)(p()(r.render(v||"")),["lazyImg"])}})]}),(0,m.jsxs)("div",{className:d().input_area,children:[(0,m.jsxs)("div",{className:d().title_area,children:[(0,m.jsx)("input",{className:d().title_input,type:"text","aria-label":"blog title",placeholder:"标题",defaultValue:f,onChange:function(e){return b(e.target.value)}}),f&&v&&(0,m.jsx)("button",{className:d().create_blog_btn,onClick:function(){var e=N.query.number;confirm("确认提交？")&&n(h(h({},e?{number:+e}:{}),{},{title:JSON.stringify({title:f,img:x}),body:v||"",labels:["blog"]})).then(function(t){t.code||(b(""),j(""),e||alert("文章已送入审核，稍后发布"),N.replace(e?"/blogs/".concat(t.data.number):"/"))})},children:N.query.number?"edit":"create"})]}),(0,m.jsx)("div",{className:d().content_area,children:(0,m.jsx)(a.Z,{ref:O,align:"top",clickable:!1,onFinish:function(e){setTimeout(function(){j(function(t){return t+e.map(function(e){var t=e.normal;return"\n![".concat(t.name,"](","https://wsrv.nl/?url=".concat((t.download_url||"").replace("https://",""),"&n=-1&q=80"),")")}).join("\n")})})},children:(0,m.jsx)("div",{children:(0,m.jsx)("textarea",{className:d().text_input,name:"blog content",placeholder:"博客正文",value:v,autoFocus:!0,suppressContentEditableWarning:!0,contentEditable:!0,onPaste:function(e){var t,n=[],r=e.clipboardData.items;if(r&&r.length){for(var a=0;a<r.length;a++)if(-1!==r[a].type.indexOf("image")){var c=r[a].getAsFile();c&&n.push(c)}}n&&(null===(t=O.current)||void 0===t||t.addFile(n))},onChange:function(e){j(e.target.value)}})})})})]})]})]})}},277:function(e,t,n){"use strict";n.d(t,{K:function(){return a},S:function(){return c}});var r={lazyImg:function(e){return e.replace(/\<img src/g,'<img class="lazy" src="'.concat("https://wsrv.nl/?url=raw.githubusercontent.com/mirrows/photo/main/normal/2023_09_10/pic1694333133502339.gif&w=130&fit=cover&n=-1&q=80",'" data-src'))},tableScroll:function(e){return e.replace(/\<table\>/g,'<div class="scroll_table"><table>').replace(/\<\/table\>/g,"</table></div>")}},a=function(e,t){var n={};null==t||t.forEach(function(e){n[e]=!0});var a=e;return Object.keys(r).forEach(function(e){n[e]||(a=r[e](a))}),a},c=function(e){return e.replace(/\*\*(.+)\*\*(\S)/g,"**$1** $2")}},9173:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blogs/components/creator",function(){return n(989)}])},684:function(e){e.exports={creator_wrap:"creator_creator_wrap__B66pA",wrap:"creator_wrap__CQmJ_",input_area:"creator_input_area__2iLs7",real_content_area:"creator_real_content_area__ASLMh",content_area:"creator_content_area__4UAL0",title_area:"creator_title_area__0vfoT",title_input:"creator_title_input__z_M3O",text_input:"creator_text_input__hH1Wl",create_blog_btn:"creator_create_blog_btn__w5oCy",text_small:"creator_text_small__Nmyd2",atl_base_msg:"creator_atl_base_msg___EteA",atl_bg:"creator_atl_bg__u8emt",blog_content:"creator_blog_content__B0yAk",mobile_top_mask:"creator_mobile_top_mask__2g9BV"}}},function(e){e.O(0,[880,811,922,774,888,179],function(){return e(e.s=9173)}),_N_E=e.O()}]);