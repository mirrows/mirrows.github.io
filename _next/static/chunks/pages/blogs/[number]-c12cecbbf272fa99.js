(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[88],{9550:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(9521),a=n(3806),o=n(7294),i=n(5893),l=r.ZP.div.withConfig({displayName:"Pagination__DIV",componentId:"sc-5hgtay-0"})(["&.pagination_wrap{margin-bottom:10px;text-align:right;}.arrow{padding:4px 16px;border:none;background-color:#fff;border-radius:6px;pointer-events:all;}.arrow[disabled]{opacity:0.4;cursor:default;}.arrow[disabled] *{cursor:default;}.arrow_left{border-radius:6px 0 0 6px;}.arrow_right{border-radius:0 6px 6px 0;}.vals{display:inline-block;background-color:#c3c3c3;line-height:28px;vertical-align:bottom;color:#fff;opacity:0.8;}.page_val,.total_val{display:inline-block;padding:0 8px;}.total_val{background-color:#000;}"]);function c(e){var t=e.page,n=e.size,r=void 0===n?30:n,c=e.total,s=e.onChange,d=(0,o.useState)(1),u=d[0],p=d[1],f=(0,o.useState)(r)[0];return(0,o.useEffect)(function(){p(t||1)},[t]),c<r?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(l,{className:"pagination_wrap",children:[(0,i.jsx)("button",{className:"arrow arrow_left",disabled:1===u,onClick:function(){p(function(e){var t=e-1;return s({page:t,size:f,total:c,type:"before"}),t})},children:(0,i.jsx)(a.Z,{type:"arrow_left",fill:"gray",width:"20"})}),(0,i.jsxs)("span",{className:"vals",children:[(0,i.jsxs)("span",{className:"page_val",children:[u,"/",Math.ceil(c/f)]}),(0,i.jsx)("span",{className:"total_val",children:c})]}),(0,i.jsx)("button",{className:"arrow arrow_right",disabled:u===Math.ceil(c/f),onClick:function(){p(function(e){var t=e+1;return s({page:t,size:f,total:c,type:"after"}),t})},children:(0,i.jsx)(a.Z,{type:"arrow_right",fill:"gray",width:"20"})})]})}},7153:function(e,t,n){"use strict";var r=n(7294);t.Z=function(e){var t=e.value,n=e.render,a=(0,r.useState)(t),o=a[0],i=a[1];return(0,r.useEffect)(function(){i((t?new Date(t):new Date).toLocaleString())},[t]),n(o||"")}},8e3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AmpStateContext=void 0;var r=(0,n(2648).Z)(n(7294)).default.createContext({});t.AmpStateContext=r},9470:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInAmpMode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ampFirst,n=e.hybrid,r=e.hasQuery;return void 0!==t&&t||void 0!==n&&n&&void 0!==r&&r}},2717:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultHead=d,t.default=void 0;var r=n(6495).Z,a=n(2648).Z,o=(0,n(1598).Z)(n(7294)),i=a(n(1585)),l=n(8e3),c=n(5850),s=n(9470);function d(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[o.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(o.default.createElement("meta",{name:"viewport",content:"width=device-width"})),t}function u(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===o.default.Fragment?e.concat(o.default.Children.toArray(t.props.children).reduce(function(e,t){return"string"==typeof t||"number"==typeof t?e:e.concat(t)},[])):e.concat(t)}n(6065);var p=["name","httpEquiv","charSet","itemProp"];function f(e,t){var n,a,i,l,c=t.inAmpMode;return e.reduce(u,[]).reverse().concat(d(c).reverse()).filter((n=new Set,a=new Set,i=new Set,l={},function(e){var t=!0,r=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){r=!0;var o=e.key.slice(e.key.indexOf("$")+1);n.has(o)?t=!1:n.add(o)}switch(e.type){case"title":case"base":a.has(e.type)?t=!1:a.add(e.type);break;case"meta":for(var c=0,s=p.length;c<s;c++){var d=p[c];if(e.props.hasOwnProperty(d)){if("charSet"===d)i.has(d)?t=!1:i.add(d);else{var u=e.props[d],f=l[d]||new Set;("name"!==d||!r)&&f.has(u)?t=!1:(f.add(u),l[d]=f)}}}}return t})).reverse().map(function(e,t){var n=e.key||t;if(!c&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(function(t){return e.props.href.startsWith(t)})){var a=r({},e.props||{});return a["data-href"]=a.href,a.href=void 0,a["data-optimized-fonts"]=!0,o.default.cloneElement(e,a)}return o.default.cloneElement(e,{key:n})})}t.default=function(e){var t=e.children,n=o.useContext(l.AmpStateContext),r=o.useContext(c.HeadManagerContext);return o.default.createElement(i.default,{reduceComponentsToState:f,headManager:r,inAmpMode:s.isInAmpMode(n)},t)},("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.headManager,l=e.reduceComponentsToState;function c(){if(n&&n.mountedInstances){var t=r.Children.toArray(Array.from(n.mountedInstances).filter(Boolean));n.updateHead(l(t,e))}}return a&&(null==n||null==(t=n.mountedInstances)||t.add(e.children),c()),o(function(){var t;return null==n||null==(t=n.mountedInstances)||t.add(e.children),function(){var t;null==n||null==(t=n.mountedInstances)||t.delete(e.children)}}),o(function(){return n&&(n._pendingUpdate=c),function(){n&&(n._pendingUpdate=c)}}),i(function(){return n&&n._pendingUpdate&&(n._pendingUpdate(),n._pendingUpdate=null),function(){n&&n._pendingUpdate&&(n._pendingUpdate(),n._pendingUpdate=null)}}),null};var r=(0,n(1598).Z)(n(7294)),a=!1,o=r.useLayoutEffect,i=a?function(){}:r.useEffect},6065:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warnOnce=void 0,t.warnOnce=function(e){}},4546:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return P},default:function(){return Z}});var r=n(9499),a=n(2999),o=n(3806),i=n(6294),l=n(5835),c=n(8984),s=n(277),d=n(9008),u=n.n(d),p=n(1664),f=n.n(p),m=n(1163),h=n(7294),g=n(9521),x=n(8924),b=n.n(x),v=n(9980),_=n.n(v),w=n(7153),y=n(9550),j=n(9922),k=n(7989),N=n(5893);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I=g.ZP.div.withConfig({displayName:"number__DIV",componentId:"sc-xgj082-0"})(["position:fixed;top:0;bottom:0;left:0;right:0;z-index:-1;background-color:#e2e2e2;"]),C=g.ZP.div.withConfig({displayName:"number__BlogContent",componentId:"sc-xgj082-1"})(['position:absolute;left:0;right:0;display:flex;justify-content:center;align-items:flex-start;margin:60px auto;color:#000;line-height:1.2;pointer-events:none;vertical-align:bottom;.blog_wrap{min-width:200px;padding:10px;margin:5px;background-color:#fff;box-sizing:border-box;border-radius:8px;pointer-events:all;}.blog_left{display:flex;flex-direction:column;flex:1 1 769px;max-width:769px;overflow:hidden;}.add_comment{pointer-events:all;}.text_area{width:100%;padding:10px;background-color:#f5f5f5;border:none;box-sizing:border-box;border-radius:6px;vertical-align:bottom;resize:none;outline:none;font-size:16px;}.operate_wrap{display:flex;justify-content:space-between;flex:1;.preview{width:24px;height:24px;padding:0 2px;margin:0 4px;vertical-align:middle;cursor:pointer;fill:#a2a2a2;&:hover{background-color:#a2a2a2;border-radius:4px;fill:#fff;}}.submit{padding:5px 16px;font-weight:bold;background-color:#666;border:none;border-radius:4px;font-size:14px;color:#fff;cursor:pointer;white-space:nowrap;}}.blog_content{padding:10px;box-sizing:border-box;border-radius:8px;pointer-events:all;}.blog_content,.preview_detail{blockquote{padding:4px 0 4px 1em;margin:0;margin-bottom:8px;border-left:4px solid gray;white-space:normal;background-color:#f5f5f5;border-radius:0 6px 6px 0;opacity:0.8;font-size:14px;p{margin:0;line-height:1.2;}}p{margin:0 0 10px;white-space:pre-wrap;line-height:1.5;word-break:break-all;}a{pointer-events:all;}img{max-width:100%;}table{border-collapse:collapse;}table th,table td{min-width:80px;padding:4px;border:1px solid #000;}ul{margin:10px 0;}ul li:before{content:"⚪";float:left;margin-right:10px;font-weight:900;}code{background-color:#f5f5f5;overflow:auto;color:#000;}pre{padding:10px;background-color:#f5f5f5;overflow:auto;border-radius:8px;color:#000;}pre{&::-webkit-scrollbar{width:8px;height:8px;}&::-webkit-scrollbar-thumb{border-radius:10px;background:#a5a5a5;}}}.preview_detail_wrap{max-height:240px;overflow:auto;}.preview_detail{pointer-events:none;}.preview_detail_wrap,.text_area,.comment_detail{pointer-events:all;&::-webkit-scrollbar{width:8px;height:8px;}&::-webkit-scrollbar-thumb{border-radius:10px;background:#a5a5a5;}}.comments_wrap{display:flex;flex-direction:column;min-width:240px;margin:5px;position:sticky;top:65px;max-height:calc(100vh - 80px);overflow:auto;&::-webkit-scrollbar{display:none;}}.avator{width:36px;height:36px;margin-right:10px;border-radius:4px;}.author_msg{display:flex;padding:5px;box-shadow:0px 0px 10px -5px #999;}.comment_content_wrap{background-color:#fff;border-radius:5px;margin-bottom:10px;pointer-events:all;.comment_detail_wrap{padding:10px;}.comment_detail{max-height:400px;overflow:auto;}}@media (min-width:769px){.comment_detail{max-width:400px;}}.text_small{font-size:12px;color:#423f3f;}@media (max-width:769px){display:block;.comments_wrap{max-height:unset;}}.atl_base_msg{margin-right:20px;}.atl_bg{height:200px;width:100%;object-fit:cover;margin:10px 0;}.fixed_operate_wrap{position:fixed;bottom:0;right:0;margin:28px 10px;z-index:6;pointer-events:all;}.artical_btn{display:inline-block;padding:0;background-color:transparent;background-image:radial-gradient(#000 0%,#888 10%,#fff 60%,transparent 75%);;border:none;border-radius:6px;text-align:center;}.atl_icon{width:25px;height:25px;fill:#888;}.pagination_wrap{text-align:right;}.other_words{display:flex;align-items:center;margin-bottom:10px;}.input_item{flex:1;width:0;padding:10px;margin:0 5px;border:none;box-sizing:border-box;border-radius:6px;vertical-align:bottom;background-color:#f5f5f5;}.input_item:first-child{margin-left:0;}.input_item:last-child{margin-right:0;}']),P=!0;function Z(e){var t=e.artical,n=e.comments,r=e.pageInfo,d=new(_()),p=(0,m.useRouter)(),g=p.query,x=p.replace,v=(0,h.useState)(t),S=v[0],P=v[1],Z=(0,h.useRef)(null),z=(0,h.useRef)(null),E=(0,h.useRef)(null),M=(0,h.useRef)(null),R=(0,h.useState)(!1),A=R[0],q=R[1],U=(0,h.useState)(n||[]),D=U[0],T=U[1],F=(0,h.useState)(r||{}),H=F[0],L=F[1],J=(0,h.useState)(!1),G=J[0],K=J[1],$=(0,h.useState)(1),B=$[0],V=$[1],W=(0,h.useRef)(null),X=function(){if(null!==(e=z.current)&&void 0!==e&&e.value){var e,t=b()(d.render(z.current.value));(null==Z?void 0:Z.current)&&(Z.current.innerHTML=t)}},Q=(0,h.useCallback)(function(e){g.number&&(0,i.Jl)(e||{number:+g.number}).then(function(t){var n=t.data,r=t.total,a=t.pageInfo;T(n),P(function(e){return O(O({},e),{},{comments:r})}),L(a),e||V(1)})},[g]);return(0,h.useEffect)(function(){g.number&&(0,l.Dp)({number:+g.number}).then(function(e){var t,n;if(!(null!==(t=e.data)&&void 0!==t&&null!==(n=t.labels)&&void 0!==n&&n.some(function(e){return"blog"===e.name}))){x("/404");return}(null==e?void 0:e.data)&&P(e.data),Q()}),c.SR.data.emit(),c.SR.isGithubOwner(function(e){try{var t,n,r=JSON.parse(localStorage.userMsg);E.current&&(E.current.value=r.username),M.current&&(M.current.value=r.email)}catch(r){null!==(t=c.SR.data.userInfo)&&void 0!==t&&t.login&&!e&&(E.current&&(E.current.value=c.SR.data.userInfo.login),M.current&&(null===(n=c.SR.data.userInfo)||void 0===n?void 0:n.email)&&(M.current.value=c.SR.data.userInfo.email))}K(e)})},[g,Q,x]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(u(),{children:[(0,N.jsx)("title",{children:null==S?void 0:S.title}),(0,N.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,N.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,N.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,N.jsxs)("main",{children:[(0,N.jsx)(I,{id:"test"}),(0,N.jsxs)(C,{children:[(0,N.jsxs)("div",{className:"blog_left",children:[(0,N.jsxs)("div",{className:"blog_wrap",children:[(0,N.jsx)("h1",{children:(null==S?void 0:S.title)||""}),(0,N.jsxs)("div",{className:"text_small",children:[(0,N.jsxs)("span",{className:"atl_base_msg",children:["创建时间：",(0,N.jsx)(w.Z,{render:function(e){return(0,N.jsx)("span",{children:e})},value:null==S?void 0:S.created_at})]}),(0,N.jsxs)("span",{className:"atl_base_msg",children:["评论数：",(null==S?void 0:S.comments)||0]})]}),(0,N.jsx)(a.Z,{className:"atl_bg",width:"700",height:"200",src:(null==S?void 0:S.img)||"",alt:(null==S?void 0:S.title)||""}),(0,N.jsx)("div",{className:"blog_content",dangerouslySetInnerHTML:{__html:(0,s.K)(b()(d.render((null==S?void 0:S.body)||"")))}})]}),(0,N.jsxs)("div",{className:"blog_wrap add_comment",children:[(0,N.jsxs)("div",{className:"other_words",children:[(0,N.jsx)("input",{ref:E,type:"text",className:"input_item",placeholder:"用户名(必填)",name:"",id:""}),(0,N.jsx)("input",{ref:M,type:"text",className:"input_item",placeholder:"邮箱(必填)",name:"",id:""})]}),(0,N.jsxs)(j.Z,{ref:W,clickable:!1,autoUpload:!0,onFinish:function(e){console.log(e),setTimeout(function(){z.current&&(z.current.value=z.current.value+e.map(function(e){var t=e.normal;return"\n![".concat(t.name,"](https://wsrv.nl/?url=").concat(t.download_url.replace("https://",""),")")}).join("\n"),z.current.focus())})},children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{htmlFor:"commentInput"}),(0,N.jsx)("textarea",{id:"commentInput",ref:z,className:"text_area",rows:8,style:{display:A?"none":"block"},placeholder:"这里添加评论......",suppressContentEditableWarning:!0,contentEditable:!0,onPaste:function(e){var t,n=[],r=e.clipboardData.items;if(r&&r.length){for(var a=0;a<r.length;a++)if(-1!==r[a].type.indexOf("image")){var o=r[a].getAsFile();o&&n.push(o)}}n&&(null===(t=W.current)||void 0===t||t.addFile(n))}})]}),(0,N.jsxs)("div",{className:"operate_wrap",children:[(0,N.jsx)(o.Z,{type:"code",className:"preview",alt:"preview",onClick:function(e){e.stopPropagation(),q(function(e){return e||X(),!e})}}),(0,N.jsx)("button",{className:"submit","aria-label":"submit comment",onClick:function(e){if(e.stopPropagation(),null!==(t=E.current)&&void 0!==t&&t.value&&null!==(n=M.current)&&void 0!==n&&n.value&&null!==(r=z.current)&&void 0!==r&&r.value&&g.number){var t,n,r,a,o={body:z.current.value,login:E.current.value,email:M.current.value,avatarUrl:M.current.value.match("@qq.com")?"https://q.qlogo.cn/g?b=qq&nk=".concat(M.current.value.trim().replace("@qq.com",""),"&s=100"):null!==(a=c.SR.data.userInfo)&&void 0!==a&&a.login&&!G?c.SR.data.userInfo.avatar_url:"https://ui-avatars.com/api/?name=".concat((0,k.O1)())};if(!M.current.value.match(/^[A-Za-z0-9-_\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z]+)+$/)){alert("邮箱格式错误");return}(0,i.Ir)(JSON.stringify(o),+g.number).then(function(e){var t,n;!e.code&&(Q(),localStorage.setItem("userMsg",JSON.stringify({username:null===(t=E.current)||void 0===t?void 0:t.value,email:null===(n=M.current)||void 0===n?void 0:n.value})),z.current&&(z.current.value="",Z.current&&(Z.current.innerHTML=""),q(!1)))})}},children:"add comment"})]})]}),(0,N.jsx)("div",{className:"preview_detail_wrap",style:{display:A?"block":"none"},children:(0,N.jsx)("div",{ref:Z,className:"blog_content preview_detail"})})]})]}),(0,N.jsxs)("div",{className:"comments_wrap",children:[(0,N.jsx)(y.Z,{page:B,total:(null==S?void 0:S.comments)||0,onChange:function(e){var t=e.type;V(e.page||1),Q({number:+(g.number||""),type:t,cursor:{before:H.startCursor,after:H.endCursor}[t]})}}),D.length?D.map(function(e){return(0,N.jsxs)("div",{className:"comment_content_wrap",children:[(0,N.jsxs)("div",{className:"author_msg",children:[(0,N.jsx)(a.Z,{className:"avator",width:"36",height:"36",src:e.author.avatarUrl,alt:""}),(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{children:e.author.login}),(0,N.jsx)(w.Z,{render:function(e){return(0,N.jsx)("div",{className:"text_small",children:e})},value:e.updatedAt})]})]}),(0,N.jsx)("div",{className:"comment_detail_wrap",children:(0,N.jsx)("div",{className:"blog_content comment_detail",dangerouslySetInnerHTML:{__html:(0,s.K)(b()(d.render(e.body)))}})})]},e.id)}):(0,N.jsx)("div",{className:"comment_content_wrap",children:(0,N.jsx)("div",{className:"blog_content comment_detail text_center",children:"一个评论都没有呢。。。。。。"})})]}),(0,N.jsx)("div",{className:"fixed_operate_wrap",children:G&&(0,N.jsx)(f(),{className:"artical_btn","aria-label":"create a new artical",href:"/blogs/edit?number=".concat(S.number),children:(0,N.jsx)(o.Z,{type:"edit",className:"atl_icon"})})})]})]})]})}},6294:function(e,t,n){"use strict";n.d(t,{Ir:function(){return i},Jl:function(){return l},jZ:function(){return o}});var r=n(842),a=n(8984),o=function(){return(0,r.IO)({path:"/about"})},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(0,r.IO)({path:"/github/addComment",method:"post",params:{number:t,body:e},headers:a.SR.data.token?{Authorization:"token ".concat(a.SR.data.token)}:{}})},l=function(e){return(0,r.IO)({path:"/github/queryComments",method:"get",query:e,headers:a.SR.data.token?{Authorization:"token ".concat(a.SR.data.token)}:{}})}},277:function(e,t,n){"use strict";n.d(t,{K:function(){return a}});var r={lazyImg:function(e){return e.replace(/\<img src/g,'<img class="lazy" src="'.concat("https://wsrv.nl/?url=raw.githubusercontent.com/mirrows/photo/main/normal/2023_09_10/pic1694333133502339.gif&w=130&fit=cover&n=-1&q=80",'" data-src'))},tableScroll:function(e){return e.replace(/\<table\>/g,'<div class="scroll_table"><table>').replace(/\<\/table\>/g,"</table></div>")}},a=function(e,t){var n={};null==t||t.forEach(function(e){n[e]=!0});var a=e;return Object.keys(r).forEach(function(e){n[e]||(a=r[e](a))}),a}},6134:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blogs/[number]",function(){return n(4546)}])},9008:function(e,t,n){e.exports=n(2717)}},function(e){e.O(0,[880,811,922,774,888,179],function(){return e(e.s=6134)}),_N_E=e.O()}]);